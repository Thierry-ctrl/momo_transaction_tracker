# MoMo Transaction Tracker

## Project Description
A full-stack application that processes Mobile Money (MoMo) transaction messages from CSV data, stores them in a database, and exposes them through a RESTful API. 

## Team Member
- Thierry Rugira

## Project Resources
- **Source Data:** `dsa/momo_messages.csv` (MoMo SMS transaction records)
- **Parsed Output:** `dsa/transactions.json` (generated by the parser)
- **Database:** `momo_tracker.db` (SQLite, generated by setup script)

---

## Assignment 1: CSV Parser & RESTful API

### Features Implemented
1. **CSV to JSON Parser:** Reads `momo_messages.csv` and converts each row into a structured JSON object saved as `transactions.json`.
2. **RESTful API:** Built using Python's `http.server`, supporting full CRUD (GET, POST, PUT, DELETE).
3. **Security:** Implemented Bearer Token authentication to protect financial data.
4. **DSA Optimization:** Integrated three search methods — Linear Search O(n), Dictionary Lookup O(1), and Binary Search O(log n) — with a timing benchmark to compare their performance.

### Challenges & Solutions
- **Socket Hang Up Errors:** Added explicit `Content-Length` headers in all API responses.
- **Data Synchronization:** Maintained both a list and dictionary in memory, updating both on every write operation (POST, PUT, DELETE).
- **Token Validation:** Built a clean `verify_token()` method that splits the `Authorization: Bearer <token>` header and validates it.

### Setup
1. Make sure you have Python 3 installed.
2. Run the parser to generate JSON data:
   ```bash
   python3 dsa/csv_parser.py
   ```
3. Start the API server:
   ```bash
   python3 api/rest_api.py
   ```
4. Test with curl or Postman:
   ```bash
   # Get all transactions
   curl -H "Authorization: Bearer momo-secret-token-2025" http://localhost:8000/transactions

   # Get one transaction
   curl -H "Authorization: Bearer momo-secret-token-2025" http://localhost:8000/transactions/1

   # Create a new transaction
   curl -X POST \
     -H "Authorization: Bearer momo-secret-token-2025" \
     -H "Content-Type: application/json" \
     -d '{"sender": "250788111111", "receiver": "250788222222", "amount": 5000}' \
     http://localhost:8000/transactions

   # Unauthorized request (should return 401)
   curl http://localhost:8000/transactions
   ```

---

## Assignment 2: Database Design & Implementation

### Overview
The database schema was designed and implemented in SQLite (no MySQL installation required).

### Key Features
- **Tables:** `users`, `categories`, `transactions`, `labels`, `transaction_labels` (junction), `audit_trail`
- **Referential Integrity:** FOREIGN KEY constraints with ON DELETE/UPDATE rules
- **Performance:** Indexes on `timestamp`, `sender_id`, `receiver_id`, `tx_ref`
- **Data Types:** REAL for amounts, TEXT for phone numbers (Rwandan 250 format)
- **Constraints:** UNIQUE constraints and CHECK constraints (e.g., amount >= 0)
- **Audit Trail:** Tracks who did what, when, and from which IP address

### Running the SQL Script

#### Prerequisites
- Python 3 (SQLite is built-in, no extra installation needed!)

#### Execute
```bash
python3 database/run_database_setup.py
```

This will:
- Create `momo_tracker.db` in the project root
- Create all 6 tables with sample data
- Print a summary of all tables and row counts
- Run a sample JOIN query to verify everything works

### Data Serialization
The mapping between SQL database schema and JSON API responses:

| SQL Table | SQL Column | JSON Key | Data Type | Note |
|-----------|-----------|----------|-----------|------|
| transactions | transaction_id | id | INTEGER | Primary key |
| transactions | tx_ref | tx_ref | TEXT/String | MoMo unique reference |
| transactions | amount | amount | REAL/Number | Amount in RWF |
| transactions | balance_after | balance_after | REAL/Number | Post-transaction balance |
| users | full_name | sender.name | Object/String | Nested via FK JOIN |
| categories | name | category | Object/String | Nested via FK JOIN |

---

## Documentation
All project documentation and schemas can be found in the `examples/` folder.
